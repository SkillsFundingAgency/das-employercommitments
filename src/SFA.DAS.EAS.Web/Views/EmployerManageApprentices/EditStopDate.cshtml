@using SFA.DAS.EmployerCommitments.Web
@using SFA.DAS.EmployerCommitments.Web.Extensions
@using SFA.DAS.EmployerCommitments.Web.ViewModels.ManageApprenticeships

@model OrchestratorResponse<EditApprenticeshipStopDateViewModel>
@{
    ViewBag.Title = "Edit stop date";
    ViewBag.PageId = "edit-stopdate";
    ViewBag.Section = "apprentices";
}

@section pageSpecificJS {
    @Scripts.Render("~/comt-assets/bundles/lengthLimitation")
}
<div class="grid-row">
    <div class="column-two-thirds">
        <form method="post" action="@Url.RouteUrl("PostEditStopDate")" novalidate onsubmit="sfa.tagHelper.submitRadioForm('@ViewBag.Title')">
            @Html.AntiForgeryToken()
            @Html.Partial("ValidationSummary", Html.ViewData.ModelState)
            <h1 class="heading-xlarge">@ViewBag.Title</h1>
            <table class="apprentice-to-stop">
                <thead>
                    <tr>
                        <th colspan="2" class="visually-hidden">Stop apprentice</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Name</td>
                        <td class="bold">@Model.Data.ApprenticeshipName</td>
                    </tr>
                    <tr>
                        <td>Unique learner number</td>
                        <td class="bold">@Model.Data.ApprenticeshipULN</td>
                    </tr>
                    <tr>
                        <td>Current stop date</td>
                        <td class="bold">
                            @Model.Data.CurrentStopDate.ToGdsFormat()
                        </td>
                    </tr>
                </tbody>
            </table>

            <fieldset>
                <div class="form-error-group form-group @Html.AddClassIfPropertyInError("NewStopDate", "error")" id="edit-stopdate-effective">
                    <span class="form-label-bold">Enter new stop date</span>
                    <span class="form-hint">The earliest date you can enter is @Model.Data.EarliestDate.ToFullDateEntryFormat()</span>
                    <div class="form-date">
                        @Html.ValidationMessage("NewStopDate", new {id = "error-message-NewStopDate", @class = "error-message"})
                        <div class="form-group form-group-day">
                            <label for="NewStopDate.Day">
                                Day
                            </label>
                            @Html.TextBox("NewStopDate.Day", Model.Data.EditStopDate.NewStopDate.Day, new {@class = "form-control length-limit", type = "number", maxlength = "2", min = "1", max = "31", aria_labelledby = "NewStopDate.Day" })
                        </div>
                        <div class="form-group form-group-month">
                            <label for="NewStopDate.Month">
                                Month
                            </label>
                            @Html.TextBox("NewStopDate.Month", Model.Data.EditStopDate.NewStopDate.Month, new {@class = "form-control length-limit", type = "number", maxlength = "2", min = "1", max = "12", aria_labelledby = "NewStopDate.Month" })
                        </div>
                        <div class="form-group form-group-year">
                            <label for="NewStopDate.Year">
                                Year
                            </label>
                            @Html.TextBox("NewStopDate.Year", Model.Data.EditStopDate.NewStopDate.Year, new {@class = "form-control length-limit", type = "number", maxlength = "4", min = "1900", max = "9999", aria_labelledby = "NewStopDate.Year" })
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <button class="button" type="submit" id="submit-apply-change">Confirm new stop date</button> &nbsp;&nbsp;&nbsp;
                    <a class="text-link cancel-link" href=@Url.RouteUrl("OnProgrammeApprenticeshipDetails") aria-label="Cancel">Cancel</a>
                </div>
            </fieldset>
        </form>
    </div>
</div>

@section breadcrumb {
    <div class="breadcrumbs">
        <a href="@Url.RouteUrl("OnProgrammeApprenticeshipDetails")" aria-label="Back to apprentices details" class="back-link">Back</a>
    </div>
}
@section gaDataLayer {
    <script>
        sfa.dataLayer.vpv = '/accounts/apprentices/manage/when-to-apply-stop'
    </script>
}